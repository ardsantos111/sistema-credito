{% extends "base.html" %}

{% block title %}Painel do Usuário - OC CDC{% endblock %}
{% block page_title %}Painel do Usuário{% endblock %}

{% block content %}
<div class="container">
    <p class="mb-3">Olá, {{ current_user.email.split('@')[0] | title }}! Bem-vindo(a)!</p>
    <p class="mb-4">Você pode acessar a página de entrada de vendas aqui:</p>
    <a href="{{ url_for('vendas') }}" class="btn btn-primary mb-4">Ir para a Entrada de Vendas</a>
    
    <div class="table-container">
        <h2>Pagamentos Vencidos</h2>
        {% if vencidos %}
            <table>
                <thead>
                    <tr>
                        <th>Cliente</th>
                        <th>Valor</th>
                        <th>Vencimento</th>
                    </tr>
                </thead>
                <tbody>
                    {% for pagamento in vencidos %}
                    <tr class="vencido">
                        <td>{{ pagamento[0] }}</td>
                        <td>R$ {{ "%.2f"|format(pagamento[1]) }}</td>
                        <td>{{ pagamento[2] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="mb-4">Nenhum pagamento vencido no momento.</p>
        {% endif %}
    </div>
    
    <div class="table-container">
        <h2>Pagamentos a Vencer neste Mês</h2>
        {% if a_vencer_mes %}
            <table>
                <thead>
                    <tr>
                        <th>Cliente</th>
                        <th>Valor</th>
                        <th>Vencimento</th>
                    </tr>
                </thead>
                <tbody>
                    {% for pagamento in a_vencer_mes %}
                    <tr class="a-vencer">
                        <td>{{ pagamento[0] }}</td>
                        <td>R$ {{ "%.2f"|format(pagamento[1]) }}</td>
                        <td>{{ pagamento[2] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="mb-4">Nenhum pagamento a vencer neste mês.</p>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    .table-container { 
        margin-top: var(--spacer-2xl); 
    }
    
    table { 
        width: 100%; 
        border-collapse: collapse; 
        transition: background-color 0.3s ease, color 0.3s ease;
        font-size: var(--font-size-base);
    }
    
    th, td { 
        padding: var(--spacer-sm) var(--spacer-base); 
        text-align: left; 
        transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }
    
    body[data-theme="light"] th {
        background-color: #f2f2f2;
        border: 1px solid #ccc;
    }
    
    body[data-theme="dark"] th {
        background-color: #2d2d2d;
        border: 1px solid #444;
        color: #e0e0e0;
    }
    
    body[data-theme="light"] td {
        border: 1px solid #ccc;
    }
    
    body[data-theme="dark"] td {
        border: 1px solid #444;
        color: #e0e0e0;
    }
    
    .vencido { 
        font-weight: var(--font-weight-bold); 
        transition: color 0.3s ease;
    }
    
    body[data-theme="light"] .vencido { 
        color: #dc3545; /* Vermelho para vencido */
    }
    
    body[data-theme="dark"] .vencido { 
        color: #ff6b6b; /* Vermelho mais claro para tema escuro */
    }
    
    .a-vencer { 
        font-weight: var(--font-weight-bold); 
        transition: color 0.3s ease;
    }
    
    body[data-theme="light"] .a-vencer { 
        color: #ffc107; /* Amarelo para a vencer */
    }
    
    body[data-theme="dark"] .a-vencer { 
        color: #ffd54f; /* Amarelo mais claro para tema escuro */
    }
    
    body[data-theme="light"] p {
        color: #333;
    }
    
    body[data-theme="dark"] p {
        color: #e0e0e0;
    }
    
    body[data-theme="light"] h2 {
        color: #333;
        font-weight: var(--font-weight-semibold);
    }
    
    body[data-theme="dark"] h2 {
        color: #e0e0e0;
        font-weight: var(--font-weight-semibold);
    }
</style>
{% endblock %}